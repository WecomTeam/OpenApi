{"operationid":"WwOpenGetApiDomainIp","tag":"wwopenlogic","summary":"获取企业微信API域名IP段","path":"https://qyapi.weixin.qq.com/cgi-bin/get_api_domain_ip","method":1,"permission":"无限定。","request":{"auth":[{"name":"access_token","example":"ACCESS_TOKEN （[获取ACCESS_TOKEN](#15074)）","type":1,"description":"","is_required":true,"default":""}],"body":[],"params":[],"formData":[]},"remainReq":[],"response":[{"status":"200","description":"","body":[{"name":"ip_list","type":2,"description":"","is_required":false,"default":"","example":"","items":{}},{"name":"errcode","type":4,"description":"","is_required":false,"default":"","example":0,"items":{}},{"name":"errmsg","type":1,"description":"","is_required":false,"default":"","example":"ok","items":{}}]}],"remainRes":[],"description":"API域名IP即qyapi.weixin.qq.com的解析地址，由开发者调用企业微信端的接入IP。如果企业需要做防火墙配置，那么可以通过这个接口获取到所有相关的IP段。IP段有变更可能，当IP段变更时，新旧IP段会同时保留一段时间。建议企业每天定时拉取IP段，更新防火墙设置，避免因IP段变更导致网络不通。<br>https://developer.work.weixin.qq.com/document/path/92520","status":2,"attention":"API域名IP即qyapi.weixin.qq.com的解析地址，由开发者调用企业微信端的接入IP。如果企业需要做防火墙配置，那么可以通过这个接口获取到所有相关的IP段。IP段有变更可能，当IP段变更时，新旧IP段会同时保留一段时间。建议企业每天定时拉取IP段，更新防火墙设置，避免因IP段变更导致网络不通。<br>**请求方式：**GET（**HTTPS**）<br>**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/get_api_domain_ip?access_token=ACCESS_TOKEN （[获取ACCESS_TOKEN](#15074)）<br>**请求参数说明：**<br>$desc 参数<br>$desc 必须<br>$desc 说明<br>$desc access_token<br>$desc 是<br>$desc 调用接口凭证<br>**返回参数说明：**<br>$desc 参数<br>$desc 类型<br>$desc 说明<br>$desc ip_list<br>$desc StringArray<br>$desc 企业微信服务器IP段<br>$desc errcode<br>$desc int<br>$desc 错误码，0表示成功，非0表示调用失败<br>$desc errmsg<br>$desc string<br>$desc 错误信息，调用失败会有相关的错误信息返回<br>根据errcode值非0，判断调用失败。以下是access_token过期的返回示例：<br>{\"ip_list\":[],\"errcode\":42001,\"errmsg\":\"access_token expired, hint: [1576065934_28_e0fae07666aa64636023c1fa7e8f49a4], from ip: 9.30.0.138, more info at https://open.work.weixin.qq.com/devtool/query?e=42001\"}","cate_path":"服务端API-开发指南-获取企业微信API域名IP段","isExampleError":false,"titleIndex":-1,"isInterface":true}
{"operationid":"WwOpenAppSendMsg","tag":"wwopenmsglogic","summary":"接口定义","path":"https://qyapi.weixin.qq.com/cgi-bin/message/send","method":2,"permission":"","request":{"auth":[{"name":"access_token","example":"ACCESS_TOKEN","type":1,"description":"","is_required":true,"default":""}],"body":[],"params":[],"formData":[]},"remainReq":[{"name":"各个消息类型的具体POST格式请阅后续“消息类型”部分。","is_required":"如果有在管理端对应用设置“在微工作台中始终进入主页”，应用在微信端只能接收到文本消息，并且文本消息的长度限制为20字节，超过20字节会被截断。同时其他消息类型也会转换为文本消息，提示用户到企业微信查看。","description":"支持id转译，将userid/部门id转成对应的用户名/部门名，目前仅**文本/文本卡片/图文/图文（mpnews）/任务卡片/小程序通知/模版消息/模板卡片消息**这八种消息类型的**部分字段**支持。仅第三方应用需要用到，企业自建应用可以忽略。具体支持的范围和语法，请查看附录[id转译说明](#10167/id转译说明)。"},{"name":"支持重复消息检查，当指定 ``\"enable_duplicate_check\": 1``开启: 表示在一定时间间隔内，同样内容（请求json）的消息，不会重复收到；时间间隔可通过``duplicate_check_interval``指定，默认``1800秒``。","is_required":"从2021年2月4日开始，企业关联添加的「小程序」应用，也可以发送文本、图片、视频、文件、图文等各种类型的消息了。<font color=\"red\">**调用建议**</font>：大部分企业应用在每小时的0分或30分触发推送消息，容易造成资源挤占，从而投递不够及时，建议尽量避开这两个时间点进行调用。"}],"response":[{"status":"200","description":"","body":[]}],"remainRes":[{"name":"errcode","description":"返回码"},{"name":"errmsg","description":"对返回码的文本描述内容"},{"name":"invaliduser","description":"不合法的userid，不区分大小写，统一转为小写"},{"name":"invalidparty","description":"不合法的partyid"},{"name":"invalidtag","description":"不合法的标签id"},{"name":"unlicenseduser","description":"没有基础接口许可(包含已过期)的userid"},{"name":"msgid","description":"消息id，用于[撤回应用消息](#31947)"},{"name":"response_code","description":"仅消息类型为“按钮交互型”，“投票选择型”和“多项选择型”的模板卡片消息返回，应用可使用response_code调用[更新模版卡片消息](#32086)接口，72小时内有效，且只能使用一次"}],"description":"应用支持推送文本、图片、视频、文件、图文等类型。<br>https://developer.work.weixin.qq.com/document/path/90236","status":2,"attention":"**返回示例：**<br>{\"errcode\":0,\"errmsg\":\"ok\",\"invaliduser\":\"userid1|userid2\",\"invalidparty\":\"partyid1|partyid2\",\"invalidtag\":\"tagid1|tagid2\",\"unlicenseduser\":\"userid3|userid4\",\"msgid\":\"xxxx\",\"response_code\":\"xyzxyz\"}<br>如果部分接收人无权限或不存在，发送仍然执行，但会返回无效的部分（即invaliduser或invalidparty或invalidtag或unlicenseduser），常见的原因是**接收人不在应用的可见范围内**。<br>权限包含**应用可见范围**和**基础接口权限**(基础账号、互通账号均可)，unlicenseduser中的用户在应用可见范围内但没有基础接口权限。<br>如果**全部**接收人无权限或不存在，则本次调用返回失败，errcode为81013。<br>返回包中的userid，不区分大小写，统一转为小写","cate_path":"服务端API-消息推送-发送应用消息","isExampleError":true,"titleIndex":0,"isInterface":true}